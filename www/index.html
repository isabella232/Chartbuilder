<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
    <head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>Chartbuilder</title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width">

		<!-- favicon updates through js -->
		<link id="favicon" rel="shortcut icon" type="image/png" href="" />


    <script src="//ajax.googleapis.com/ajax/libs/webfont/1.4.10/webfont.js"></script>
    <script>
        WebFont.load({
             custom: {
                 families: [
                     'Gotham SSm:n4,n7',
                     'Gotham:n4,n7'
                 ],
                 urls: [
                     'http://s.npr.org/templates/css/fonts/GothamSSm.css',
                     'http://s.npr.org/templates/css/fonts/Gotham.css'
                 ]
             },
             timeout: 10000
        });
    </script>

		<!-- Libraries CSS -->
		<link rel="stylesheet" href="css/main.css" type="text/css" media="screen" charset="utf-8">
		<link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" media="screen" charset="utf-8">
		<link rel="stylesheet" href="css/chosen.css" type="text/css" media="screen" charset="utf-8">
		<link rel="stylesheet" href="css/colorPicker.css" type="text/css" media="screen" charset="utf-8">

		<!-- Chartbuilder CSS -->
    <link rel="stylesheet" href="css/chartbuilder.css" type="text/css" media="screen" charset="utf-8">
		<link rel="stylesheet" href="css/gneisschart.css" type="text/css" media="screen" charset="utf-8">

    <!-- Font Awesome CSS -->
    <link rel="stylesheet" href="fonts/font-awesome/css/font-awesome.min.css">

	</head>
	<body>
		<!-- Add your site or application content here -->


    <nav class="tools">
        <h1>
            Chartbuilder
            <span class="help">
                <a href="https://docs.google.com/document/d/1SKFjnTBku6KXo6PCbf15kzAPoObodpgB2CssrFU04kA/edit?usp=sharing">
                <i class="icon-info-sign"></i>
                How To Use This
                </a>
            </span>
        </h1>
        <a class="toolkit-link" href="http://tools.apps.npr.org">
            <span class="logo-wrapper"><img src="http://media.npr.org/chrome/news/nprlogo_138x46.gif" alt="NPR" /></span>
            Newsroom Toolkit
        </a>
    </nav>
    <div class="main-wrapper">
      <div id="chart-column">
        <div id="staticContainer">
          <div id="chartContainer"></div>
          <canvas id="canvas" width="640px" height="960px"></canvas>
          <canvas id="favicanvas" width="16px" height="16px"></canvas>
        </div>
        <p>Not getting the results you need? Email <a href="mailto:nprapps@npr.org">nprapps@npr.org</a> for help or to request a custom chart!</p>

      </div>
  		<div id="main">
  		  <div id="rightColumn" class="container">
  			<div class="cbInner">

            <div id="previous-charts" class="row">
              <div class="form-group col-md-6">

                <div class="load-previous">
                  <label for="previous_charts">Load a previously created chart</label>
                  <select name="previous_charts" id="previous_charts" class="form-control"></select>
                </div>
              </div>
              <div class="col-md-6">
                <button id="reset-form" class="btn btn-danger"><span class="glyphicon glyphicon-repeat"></span> Reset Form</button>
              </div>
            </div>

    		    <div id="import" class="row">

              <div class="col-xs-12 col-md-12">
               	<div class="inputGroup">

                  <div class="row">
                    <div class="col-md-12">
                      <h2 id="inputDataHeading"><span class="step-header">1</span> Import Data</h2>

                    </div>
                  </div>

                  <p>Copy and paste cells from your spreadsheet into the text field below. </p>
                  <p id="invalidDataSpan" class="alert alert-danger hide">Data could not be parsed.</p>
                  <textarea id="csvInput" class="input-box form-control" name="csvInput" rows="8"></textarea>
                  <a id="transpose-data" class="btn btn-warning" href="#"><span class="glyphicon glyphicon-retweet"></span> Swap rows and columns</a>

                  <p>Verify your data appears correct in this table. The first column will become labels for the horizontal axis. Remaining columns will be plotted on the vertical axis. (Except on bar charts.)</p>
                  <div id="dataTable" class="input-box">
                     <table border=0 class="table table-bordered table-striped table-responsive">
                     </table>
                  </div>
               	</div>
              </div>
            </div>
            <div id="chart-options" class="row">
              <div class="col-md-12 topOptionBlock form-horizontal">
                <h2><span class="step-header">2</span> Chart Options</h2>
                <div class="form-group">
                  <label class="col-md-3 control-label" for="chart_title">Title</label>
                  <div class="col-md-5">
                    <textarea rows="3" cols="50" class="form-control" placeholder="(required)" name="chart_title" id="chart_title"></textarea>
                  </div>
                  <p class="help-block col-md-4"></p>

                </div>
                <div class="form-group">
                  <label for="typePicker" class="col-md-3 control-label">Select Chart Type</label>
                  <div class="col-md-5">
                    <select id="typePicker" class="form-control">
                        <option selected="selected" value="line">Line</option>
                        <option value="column">Column</option>
                        <option value="bar">Bar</option>
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-md-3 series-colors control-label">Select Series Colors</label>
                  <div id="seriesItems" class="col-md-9"></div>
                </div>
      				</div>
            </div>
            <div id="axis-options" class="row">
      				<div class="form-horizontal col-md-12">
                <div class="inputGroup">
     			<h2><span class="step-header">3</span> <span id="axis-title">Vertical Axis Options</span></h2>
      			<div id="rightAxisControls form-inline">
                    <div class="form-group">
                      <label class="col-md-3 control-label" for="axis_interval">Tick Interval</label>
                      <div class="col-md-5">
                        <input type="text" class="form-control" name="axis_interval" value="" id="axis_interval" placeholder="(required)">
                      </div>
                      <p class="help-block col-md-4"></p>
                      <p class="control-instructions col-md-5 col-md-offset-3">The space between the axis lines, e.g. 0.25, 5, 100.</p>
                    </div>
      				<div class="form-group">
                      <label class="col-md-3 control-label" for="right_axis_max">Maximum</label>
                      <div class="col-md-5">
                        <input type="text" class="form-control" name="right_axis_max" value="" id="right_axis_max" placeholder="(optional)">
                      </div>
                      <p class="help-block col-md-4"></p>
                    </div>
      							<div class="form-group">
                      <label class="col-md-3 control-label" for="right_axis_min">Minimum</label>
                      <div class="col-md-5">
                        <input type="text" class="form-control" name="right_axis_min" value="" id="right_axis_min" placeholder="(optional)">
                      </div>
                      <p class="help-block col-md-4"></p>
                    </div>
                    <div class="form-group">
                      <label class="col-md-3 control-label" for="right_axis_prefix">Unit Prefix</label>
                      <div class="col-md-5">
                        <input type="text" class="form-control" name="right_axis_prefix" value="" id="right_axis_prefix" placeholder="e.g. $50 (optional)">
                      </div>
                      <p class="help-block col-md-4"></p>
                    </div>
                    <div class="form-group">
                      <label class="col-md-3 control-label" for="right_axis_suffix">Unit Suffix</label>
                      <div class="col-md-5">
                        <input type="text" class="form-control" name="right_axis_suffix" value="" id="right_axis_suffix" placeholder="e.g. 50% (optional)">
                      </div>
                      <p class="help-block col-md-4"></p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div id="export" class="row">
              <div class="col-md-12">
                <div class="inputGroup">
                  <h2><span class="step-header">4</span> Export</h2>
                  <button type="button" id="createImageButton" class="btn btn-primary btn-lg" data-toggle="modal" href="#download-modal"><span class="glyphicon glyphicon-picture"></span> Create Chart Image</button>
                </div>
                <p class="help-block"></p>
              </div>
            </div>
            <div id="seamus" class="row">
              <div class="col-md-12 full">
                  <h2><span class="step-header">5</span> Add to Seamus</h2>

                  <ul>
                    <li>Open the Seamus story editor and add an image by selecting "image" in the assets drawer.</li>
                    <li>Click "browse" and locate the image you downloaded.</li>
                    <li>Select the custom crop and expand the crop box to fit the entire image, including the title.</li>
                    <li>Make sure "enlargement" is set to none, set the primary crop to "custom" and click "perform crop."</li>
                  </ul>
                  <p><img src="assets/seamus-crop.png" class="img-responsive"></p>
                  <ul>
                    <li>Click "next" and add a source and caption for your chart. Always credit your data source!</li>
                  </ul>
              </div>
            </div>
  			</div>
        <div id="blankColumn" class="column"></div>
  		</div>
    </div>

    <span id="font-sample">This only exists to force the fonts to load.</span>


    <!-- Modal -->
    <div class="modal fade" id="download-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Image Created!</h4>
          </div>
          <div class="modal-body">
            <p>Your chart is ready to download. Click the download button below to save the image to your computer.</p>
            <p>(Designer? <a id="downloadSVGLink" href="javascript:;">Click here to download an SVG.</a>)</p>
          </div>
          <div class="modal-footer">
            <a download="new_chart.png" id="downloadImageLink" class="downloadLink btn btn-lg btn-primary" href="#" target="_blank"><span class="glyphicon glyphicon-circle-arrow-down"></span> Download</a>
            <button type="button" class="btn btn-lg btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

        <!-- Libraries JS -->
		<script src="js/lib/modernizr.js" charset="utf-8"></script>
		<script src="js/lib/jquery.js" charset="utf-8"></script>
		<script src="js/lib/d3.v2.js" charset="utf-8"></script>
        <script src="js/lib/canvg.js" charset="utf-8"></script>
		<script src="js/lib/rgbcolor.js" charset="utf-8"></script>
		<script src="js/lib/jquery.colorPicker.js" charset="utf-8"></script>
		<script src="js/lib/csvkit.js" charset="utf-8"></script>
		<script src="js/lib/chosen.jquery.min.js" charset="utf-8"></script>
        <script src="js/lib/bootstrap.min.js" charset="utf-8"></script>

		<!-- Chartbuilder JS -->
		<script src="js/gneisschart.js" charset="utf-8"></script>
		<script src="js/chartbuilder.js"></script>
	</body>
</html>
